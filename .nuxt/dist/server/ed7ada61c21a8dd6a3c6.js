exports.ids=[3],exports.modules={112:function(e,t,r){"use strict";r.r(t);var o=r(94),l=r.n(o);for(var n in o)"default"!==n&&function(e){r.d(t,e,function(){return o[e]})}(n);t.default=l.a},113:function(e,t,r){(e.exports=r(2)(!1)).push([e.i,'@charset "UTF-8";.page-detail .m-crumbs{margin:20px 0}.page-detail .m-sum-card{display:flex;background:#fff;box-shadow:0 5px 14px 0 rgba(0,0,0,.1);border-radius:10px;padding:20px}.page-detail .m-sum-card dt{flex:1;padding-bottom:5px}.page-detail .m-sum-card dt h1{font-size:26px;font-weight:500;color:#222}.page-detail .m-sum-card dt .el-rate{display:inline-block}.page-detail .m-sum-card dt .el-rate .el-rate__icon{font-size:12px}.page-detail .m-sum-card dt>span{font-size:12px;margin-right:10px}.page-detail .m-sum-card dt>ul{border-top:1px solid #e5e5e5;list-style:none;padding-top:5px;margin-top:10px}.page-detail .m-sum-card dt>ul li{font-size:14px;color:#666;padding:7px 0}.page-detail .m-sum-card dd{width:383px}.page-detail .m-detail-list{margin-top:34px}.page-detail .m-detail-list h3{margin:8px 0}.page-detail .m-detail-list ul{list-style:none;background-color:#fff;padding:20px 20px 0;margin-bottom:10px;border-radius:4px;border:1px solid #e5e5e5}.page-detail .m-detail-item .section{display:flex;padding:20px 0;border-bottom:1px solid #ddd;align-items:center}.page-detail .m-detail-item .section dd:first-child{padding-right:20px}.page-detail .m-detail-item .section dd:first-child img{width:100px;height:100px;border-radius:4px}.page-detail .m-detail-item .section dd:nth-child(2){flex:1}.page-detail .m-detail-item .section dd>h4{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:480px;font-size:16px;color:#222;font-weight:500;height:22px;line-height:22px;margin-bottom:4px;cursor:pointer}.page-detail .m-detail-item .section dd>p{font-size:12px;color:#666;height:17px;line-height:17px;margin-bottom:22px}.page-detail .m-detail-item .section dd>p .price{font-size:30px;color:#f60;margin-right:10px}.page-detail .m-detail-item .section dd>p .price:before{content:"￥";font-size:14px}.page-detail .m-detail-item li:last-child .section{border-bottom:none}.page-detail .m-title{font-size:20px;line-height:26px;margin-bottom:8px;margin-top:40px}.page-detail .deal-need-login{padding:30px 0;margin-bottom:40px;text-align:center;background-color:#fff;border:1px solid #e5e5e5}.page-detail .deal-need-login>img{display:inline-block;width:160px;height:120px;border-radius:4px}.page-detail .deal-need-login>span{display:block;margin:10px 0 14px;color:#666;font-size:16px;line-height:26px}.page-detail .deal-need-login>button{background-color:#13d1be;border-color:#13d1be}.page-detail .deal-need-login>button a{color:#fff}',""])},134:function(e,t,r){"use strict";r.r(t);var o={props:{keyword:{type:String,default:""},type:{type:String,default:""}}},l=r(1),n=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-crumbs"},[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("\n      "+e._s(e.$store.state.geo.position.city.replace("市",""))+"美团\n    ")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("\n      "+e._s(e.$store.state.geo.position.city.replace("市",""))+e._s(e.type)+"\n    ")]),e._v(" "),r("el-breadcrumb-item",[r("a",{attrs:{href:"/"}},[e._v("\n        "+e._s(e.$store.state.geo.position.city.replace("市",""))+e._s(decodeURIComponent(e.keyword))+"\n      ")])])],1)],1)},[],!1,null,null,"d252b9be").exports,d={props:{meta:{type:Object,default:()=>({})}},data:()=>({sale:70+Math.floor(300*Math.random())}),computed:{rate(){return Number(this.meta.biz_ext.rating)||Math.floor(5*Math.random())}},methods:{openMap(e){}}},summary=Object(l.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("dl",{staticClass:"m-sum-card"},[e._ssrNode("<dt>","</dt>",[e._ssrNode("<h1>"+e._ssrEscape(e._s(e.meta.name))+"</h1> "),r("el-rate",{attrs:{disabled:""},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}}),e._ssrNode(" <span>"+e._ssrEscape(e._s(Number(e.meta.biz_ext.rating)||e.rate)+"分")+"</span> <span>"+e._ssrEscape("人均￥"+e._s(Number(e.meta.biz_ext.cost)))+"</span> <ul><li>"+e._ssrEscape("\n        地址："+e._s(e.meta.address)+"\n      ")+"</li> <li>"+e._ssrEscape("\n        电话："+e._s(e.meta.tel)+"\n      ")+"</li> <li>\n        营业时间：周一至周日 10:00-22:00\n      </li></ul>")],2),e._ssrNode(" "),e._ssrNode("<dd>","</dd>",[r("el-carousel",{attrs:{height:"214px","indicator-position":"none"}},e._l(e.meta.photos,function(e,t){return r("el-carousel-item",{key:t},[r("h3",[r("img",{attrs:{src:e.url,alt:"item.title",width:"100%",height:"100%"}})])])}),1)],1)],2)},[],!1,null,null,"cb323aa6").exports,c={props:{meta:{type:Object,default:()=>({})}},methods:{async createCart(){let{status:e,data:{code:code,id:t}}=await this.$axios.post("/cart/create",{params:{id:Math.random().toString().slice(3,9),detail:{name:this.meta.name,price:this.meta.biz_ext.cost,imgs:this.meta.photos}}});200===e&&0===code?window.location.href=`/cart/?id=${t}`:console.log("error")}}},m={components:{Item:Object(l.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.meta.photos.length?r("li",{staticClass:"m-detail-item"},[e._ssrNode('<dl class="section">',"</dl>",[e._ssrNode("<dd><img"+e._ssrAttr("src",e.meta.photos[0].url)+e._ssrAttr("alt",e.meta.photos[0].title)+"></dd> <dd><h4>"+e._ssrEscape(e._s(e.meta.name))+"</h4> <p>"+(e.meta.biz_ext&&e.meta.biz_ext.ticket_ordering?"<span>"+e._ssrEscape("\n          剩余："+e._s(Number(e.meta.biz_ext.ticket_ordering))+"\n        ")+"</span>":"\x3c!----\x3e")+" "+(e.meta.deadline?"<span>"+e._ssrEscape("\n          截止日期："+e._s(e.meta.deadline)+"\n        ")+"</span>":"\x3c!----\x3e")+'</p> <p><span class="price">'+e._ssrEscape("\n          "+e._s(Number(e.meta.biz_ext.cost))+"\n        ")+"</span> <sub>"+e._ssrEscape("\n          门店价："+e._s(Number(e.meta.biz_ext.cost))+"\n        ")+"</sub></p></dd> "),e._ssrNode("<dd>","</dd>",[r("el-button",{attrs:{type:"warning",round:""},on:{click:e.createCart}},[e._v("\n        立即抢购\n      ")])],1)],2)]):e._e()},[],!1,null,null,"3b92ef1c").exports},props:{list:{type:Array,default:()=>[]}}},h={components:{Crumbs:n,Summa:summary,List:Object(l.a)(m,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-detail-list"},[this._ssrNode("<ul>","</ul>",[this._ssrNode("<li>"+this._ssrEscape("\n      "+this._s(this.list.filter(function(e){return e.photos.length}).length)+"款套餐\n    ")+"</li> "),this._l(this.list,function(e,r){return t("item",{key:r,attrs:{meta:e}})})],2)])},[],!1,null,null,"45986727").exports},computed:{canOrder(){return this.list.filter(e=>e.photos.length).length}},async asyncData(e){let{keyword:t,type:r}=e.query,{status:o,data:{product:l,more:n,login:d}}=await e.$axios.get("/search/products",{params:{keyword:t,type:r,city:e.store.state.geo.position.city}});return 200===o?{keyword:t,product:l,type:r,list:n,login:d}:{keyword:t,product:{},type:r,list:[],login:!1}}};var _=Object(l.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-detail"},[r("el-row",[r("el-col",{attrs:{span:24}},[r("crumbs",{attrs:{keyword:e.keyword,type:e.type}})],1)],1),e._ssrNode(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("summa",{attrs:{meta:e.product}})],1)],1),e._ssrNode(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("h3",[e._v("商家团购及优惠")])])],1),e._ssrNode(" "),e.canOrder||!e.login?r("el-row",[r("el-col",{attrs:{span:24}},[e.login?r("list",{attrs:{list:e.list}}):r("div",{staticClass:"deal-need-login"},[r("img",{attrs:{src:"//p0.meituan.net/codeman/56a7d5abcb5ce3d90fc91195e5b5856911194.png",alt:"登录查看"}}),e._v(" "),r("span",[e._v("请登录后查看详细团购优惠")]),e._v(" "),r("el-button",{attrs:{type:"primary",round:""}},[r("a",{attrs:{href:"/login"}},[e._v("立即登录")])])],1)],1)],1):e._e()],2)},[],!1,function(e){var t=r(112);t.__inject__&&t.__inject__(e)},null,"e77745e6");t.default=_.exports},94:function(e,t,r){var content=r(113);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);var o=r(3).default;e.exports.__inject__=function(e){o("2e74913e",content,!0,e)}}};
//# sourceMappingURL=ed7ada61c21a8dd6a3c6.js.map